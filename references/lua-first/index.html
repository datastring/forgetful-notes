<!doctype html><html lang=en dir=ltr><head><meta property="og:title" content="Lua - First Love2D Game"><meta property="og:description" content="1. Getting Setup # I&rsquo;m assuming no knowledge of programming or Love. If you&rsquo;re familiar with either or have spent some time in other tutorials feel free to skip to section 2 or even 3.
Love2d is a great, completely free, simple 2D game engine. I cannot recommend it enough for beginners. The community is great and no one is trying to sell you anything (compare that to GameMaker or Unity!"><meta property="og:type" content="article"><meta property="og:url" content="https://datastring.github.io/forgetful-notes/references/lua-first/"><meta property="article:section" content="references"><meta property="article:modified_time" content="2023-06-29T09:47:46-05:00"><meta property="og:site_name" content="Forgetful Notes"><title>Lua - First Love2D Game | Forgetful Notes</title><link rel=manifest href=/forgetful-notes/manifest.json><link rel=icon href=/forgetful-notes/favicon.png type=image/x-icon><link rel=stylesheet href=/forgetful-notes/book.min.41f621b3a90fcd707c5f4a37817ee3881c4c749598dad60d598d079dd00da360.css integrity="sha256-QfYhs6kPzXB8X0o3gX7jiBxMdJWY2tYNWY0HndANo2A=" crossorigin=anonymous><meta charset=utf-8><meta name=description content="1. Getting Setup # I&rsquo;m assuming no knowledge of programming or Love. If you&rsquo;re familiar with either or have spent some time in other tutorials feel free to skip to section 2 or even 3.
Love2d is a great, completely free, simple 2D game engine. I cannot recommend it enough for beginners. The community is great and no one is trying to sell you anything (compare that to GameMaker or Unity!"><title>Lua - First Love2D Game</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://datastring.github.io/forgetful-notes//favicon.png><link href=https://datastring.github.io/forgetful-notes/styles.e08ceb33360cec132feb69cfb982e2a4.min.css rel=stylesheet><link href=https://datastring.github.io/forgetful-notes/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://datastring.github.io/forgetful-notes/quartz/js/darkmode.71794edf5922099dd05893eff2b5a701.min.js></script>
<script src=https://datastring.github.io/forgetful-notes/quartz/js/util.c69e233dc1cc331a30b0f670e657b425.min.js></script>
<script async src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script async src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://datastring.github.io/forgetful-notes/quartz/js/popover.f03552ccb84d99ca615d1cfb9abde59e.min.js></script>
<script defer src=https://datastring.github.io/forgetful-notes/quartz/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://datastring.github.io/forgetful-notes/quartz/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://datastring.github.io/forgetful-notes/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://datastring.github.io/forgetful-notes/",fetchData=Promise.all([fetch("https://datastring.github.io/forgetful-notes/indices/linkIndex.0e8a7db903cbb8b5e922708d9714b186.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://datastring.github.io/forgetful-notes/indices/contentIndex.2d7ee89b5e69c03ab0b0557bd14c9353.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addCollapsibleCallouts(),initPopover("https://datastring.github.io/forgetful-notes",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://datastring.github.io/forgetful-notes",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{"â€™":"'"},throwOnError:!1})}</script><script>window.Million={navigate:e=>window.location.href=e,prefetch:()=>{}},window.addEventListener("DOMContentLoaded",()=>{init(),render()})</script></head><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://datastring.github.io/forgetful-notes/quartz/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><header class=book-header><label for=menu-control><img src=/forgetful-notes/svg/menu.svg class=book-icon alt=Menu></label><h1 id=page-title><a href=https://datastring.github.io/forgetful-notes/>Forgetful Notes</a></h1><div class=spacer></div><div id=search-icon class=quartz-search><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control><main class=flex><aside class=book-menu><div class=book-menu-content><nav><div class=menu-search><div id=search-icon class=quartz-search><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div></div><ul><li><input type=checkbox id=section-fe6fe8edae024729a4d37026612df035 class=toggle>
<label for=section-fe6fe8edae024729a4d37026612df035 class="flex justify-between"><a role=button class=book-collapse-toggle>Learning</a></label><ul><li><a href=/forgetful-notes/learning/Guitar/>Guitar</a></li><li><a href=/forgetful-notes/learning/meditation/>Meditate</a></li><li><a href=/forgetful-notes/learning/poetry/>Poetry</a></li><li><a href=/forgetful-notes/learning/Story-Structure/>Story Structure</a></li></ul></li><li><input type=checkbox id=section-9cd2a08bbeca3253276f8479c1c89e2b class=toggle>
<label for=section-9cd2a08bbeca3253276f8479c1c89e2b class="flex justify-between"><a role=button class=book-collapse-toggle>Lists</a></label><ul><li><a href=/forgetful-notes/lists/bookmarklets/>Bookmarklets</a></li><li><a href=/forgetful-notes/lists/life-lessons/>Life Lessons</a></li><li><a href=/forgetful-notes/lists/Link-Collection/>Links Collection</a></li><li><a href=/forgetful-notes/lists/Newsletters-Collection/>Newsletters I Read</a></li><li><a href=/forgetful-notes/lists/podcast-collection/>Podcasts I Listen To</a></li><li><a href=/forgetful-notes/lists/Procrastination/>Procrastination Avoidal Tactics</a></li><li><a href=/forgetful-notes/lists/Quotes-Collection/>Quotes I Like</a></li><li><a href=/forgetful-notes/lists/Tools-Collection/>Tools I Use</a></li><li><a href=/forgetful-notes/lists/inspiration/>What Inspires Me</a></li><li><a href=/forgetful-notes/lists/wishlist/>Wishlist</a></li><li><a href=/forgetful-notes/lists/Words-Collection/>Words I Like</a></li></ul></li><li><input type=checkbox id=section-28ff6f6608134377659fe9e8042acbb9 class=toggle checked>
<label for=section-28ff6f6608134377659fe9e8042acbb9 class="flex justify-between"><a role=button class=book-collapse-toggle>References</a></label><ul><li><a href=/forgetful-notes/references/Grammar/>Grammar</a></li><li><a href=/forgetful-notes/references/lua-first/ class=active>Lua - First Love2D Game</a></li><li><a href=/forgetful-notes/references/lua-platformer/>Lua - Platformer</a></li><li><a href=/forgetful-notes/references/python/>Python</a></li><li><a href=/forgetful-notes/references/Skullcandy-Crusher-ANC/>Skullcandy Crusher ANC</a></li></ul></li><li><a href=/forgetful-notes/journals/>Journals</a><ul></ul></li><li><a href=/forgetful-notes/cool-things/>Cool Things</a></li><li><a href=/forgetful-notes/snippets/>Snippets</a></li><li><a href=/forgetful-notes/Today-I-Learned/>Today I Learned</a></li><li><a href=/forgetful-notes/changelog/>Changelog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class="book-page container"><article class=markdown><h1 class=title>Lua - First Love2D Game</h1><h2 id=1-getting-setup>1. Getting Setup
<a class=anchor href=#1-getting-setup>#</a></h2><p>I&rsquo;m assuming no knowledge of programming or Love. If you&rsquo;re familiar with either or have spent some time in other tutorials feel free to skip to section 2 or even 3.</p><p><a href=http://love2d.org/ rel=noopener>Love2d</a> is a great, completely free, simple 2D game engine. I cannot recommend it enough for beginners. The community is great and no one is trying to sell you anything (compare that to GameMaker or Unity!) Go ahead and download the proper version of Love for your system. I&rsquo;ll be covering usage in Windows here and I&rsquo;ll link some Mac setup tips. If you&rsquo;re using Linux or if you need more help you can check out the
<a href=http://www.love2d.org/wiki/Getting_Started rel=noopener>Love wiki page on getting started</a>.</p><p>For windows just unzip the Love archive into whichever directory you&rsquo;d like. I place my in C:\GameDev so that I have a very short path to the file, but you can put it anywhere. I&rsquo;ll also create a folder named &ldquo;ScrollingShooter&rdquo; in C:\GameDev. If you prefer to have your Love executable in a different directory you can create a new shortcut in the folder above ScrollingShooter. When we want to launch the game all we do is drag the ScrollingShooter folder onto the Love executable or shortcut.</p><h2 id=2-configuration>2. Configuration
<a class=anchor href=#2-configuration>#</a></h2><p>Inside ScrollingShooter I&rsquo;m going to create 3 files and 2 folders. The folders are <code>assets</code> (where we will be storing our graphics) and <code>bin</code> (for our .love file and executables. Go ahead and create these folders.</p><p>For text editing I&rsquo;m using
<a href=http://atom.io rel=noopener>Atom</a> with
<a href=https://atom.io/packages/language-lua rel=noopener>language-lua</a> installed. You can use any code editor you&rsquo;d like. Some good editors include
<a href=http://macromates.com/ rel=noopener>TextMate</a>,
<a href=http://notepad-plus-plus.org/ rel=noopener>Notepad++</a>, and
<a href=http://sublimetext.com rel=noopener>Sublime</a>. Some of these options cost but Atom is completely free.</p><p>I&rsquo;m going to open the ScrollingShooter directory in Atom then create two new files. The first file is <code>conf.lua</code>. This is a special file. Unlike other source files, the contents of <code>conf.lua</code> are parsed before Love finishes initializing. This means we can set things like the window size and other variables that may be locked once the game has started.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>love</span>.<span style=color:#a6e22e>conf</span>(t)
</span></span><span style=display:flex><span>	t.title <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Scrolling Shooter Tutorial&#34;</span> <span style=color:#75715e>-- The title of the window the game is in (string)</span>
</span></span><span style=display:flex><span>	t.version <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;0.9.1&#34;</span>         <span style=color:#75715e>-- The LÃ–VE version this game was made for (string)</span>
</span></span><span style=display:flex><span>	t.window.width <span style=color:#f92672>=</span> <span style=color:#ae81ff>480</span>        <span style=color:#75715e>-- we want our game to be long and thin.</span>
</span></span><span style=display:flex><span>	t.window.height <span style=color:#f92672>=</span> <span style=color:#ae81ff>800</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>-- For Windows debugging</span>
</span></span><span style=display:flex><span>	t.console <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p><code>love.conf(t)</code> is a special function that is executed before any other Love modules are loaded. We&rsquo;re going to keep it simple. It takes a single argument usually called <code>t</code>. This argument will store the game configuration. We&rsquo;re just going to set the title of our window &ndash; <code>t.title</code> &ndash; and the version of Love we&rsquo;re building this for &ndash; <code>t.version</code>. Then we&rsquo;ll set the window width and height. Finally, we set <code>t.console</code> to <code>true</code> so that we can see errors written in a console window when debugging on Windows. You&rsquo;ll want to change this to false before releasing your game.</p><p>A complete list of the attributes you can pass to <code>t</code> can be found on the
<a href=http://www.love2d.org/wiki/Config_Files rel=noopener>Config files wiki</a>.</p><p>Next create a file next to <code>conf.lua</code> called <code>main.lua</code>. This file will store all of our game logic. These are the only two code files we will need. We&rsquo;ll start by filling <code>main.lua</code> with the basic Love bits. It&rsquo;ll look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>debug <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>love</span>.<span style=color:#a6e22e>load</span>(arg)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>love</span>.<span style=color:#a6e22e>update</span>(dt)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>love</span>.<span style=color:#a6e22e>draw</span>(dt)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>The first line just sets a variable called &ldquo;debug&rdquo; to true. You&rsquo;ll want to flip this to false before release. I use this variable later for determining whether or not to write things like the frames-per-second to the screen. I&rsquo;ll demonstrate in a little bit.</p><p>Next we have three functions. These are called by the Love engine. <code>love.load</code> is called when the game first starts. We&rsquo;ll load our assets &ndash; images, sounds, etc &ndash; here. <code>love.update</code> and <code>love.draw</code> are called on every frame. Every action here will occur several times a second. Both of these function take <code>dt</code> or <code>deltaTime</code> as an argument. This is a measure of how much time has passed since the last call. We&rsquo;ll multiply our timers by these values to ensure the game runs the same on your friends old laptop that gets 30 fps or your brand new gaming rig that gets 700 fps.</p><h2 id=3-drawing-to-the-screen>3. Drawing to the Screen
<a class=anchor href=#3-drawing-to-the-screen>#</a></h2><p>Before we go any farther, lets just draw something to the screen. I&rsquo;m not much of an artist, but I know where to find people that are. For this project I&rsquo;ll be using some pixel airplanes created by
<a href=http://opengameart.org/users/chabull rel=noopener>chabull</a> and distributed for free on
<a href=http://opengameart.org/ rel=noopener>OpenGameArt.org</a>. You can download them
<a href=http://opengameart.org/content/aircrafts rel=noopener>here</a>.</p><p>I&rsquo;m going to take <em>Airplane_3.png</em> from that graphics kit, drop it in our assets folder, and rename it <em>plane.png</em>. To get this showing up in Love2d we have two steps.</p><ol><li>Load the image into memory</li><li>Draw the image</li></ol><p>If you remember, we have both a load and a draw function in our <code>main.lua</code>. Let&rsquo;s use them.</p><p>First, load the image into memory.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>playerImg <span style=color:#f92672>=</span> <span style=color:#66d9ef>nil</span> <span style=color:#75715e>-- this is just for storage</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>love</span>.<span style=color:#a6e22e>load</span>(arg)
</span></span><span style=display:flex><span>    playerImg <span style=color:#f92672>=</span> love.graphics.newImage(<span style=color:#e6db74>&#39;assets/plane.png&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>--we now have an asset ready to be used inside Love</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Next we add a draw command inside our draw function. Please note that draw commands <em>must</em> be called inside the draw function. They need to be executed every frame and the draw function is called every frame.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>love</span>.<span style=color:#a6e22e>draw</span>(dt)
</span></span><span style=display:flex><span>    love.graphics.draw(playerImg, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Our application is ready to run! Just drag the entire ScrollingShooter folder onto love.exe or a shortcut to love.exe and the application will start. The complete source for this example can be found on
<a href=https://github.com/DawsonG/Love2d-Tutorial-Scrolling-Shooter/tree/master/Lesson1/Part1 rel=noopener>GitHub</a>.</p><ul><li>[Image Placeholder]</li></ul><p>It doesn&rsquo;t look like much, but it&rsquo;s a start! You&rsquo;ll note that <code>love.graphics.draw</code> has a second and third argument. For this example I&rsquo;ve passed in 100 and 100. These are the x and y coordinates (respectively) where the image will be drawn. We&rsquo;ll talk more about those in
<a href=http://www.osmstudios.com/page/your-first-love2d-game-in-200-lines-part-2-of-3 rel=noopener>part 2</a>.</p><hr><p>In
<a href=http://www.osmstudios.com/page/your-first-love2d-game-in-200-lines-part-1-of-3 rel=noopener>part 1</a> we drew the player object to the screen. You may have noticed something a tad bit counterintuitive &ndash; the origin point (0,0) isn&rsquo;t in the bottom left like we were taught in algebra. Instead it is in the top left. Each individual image also has an origin point in the top left. So when we&rsquo;re picking a position for a image what we&rsquo;re really measuring is the distance from the top-left of the screen to the top-left of the image in pixels.</p><h2 id=4-creating-a-player-object>4. Creating A Player Object
<a class=anchor href=#4-creating-a-player-object>#</a></h2><p>In the last tutorial we placed the player at 100,100 but that value isn&rsquo;t going to be static. Instead, the player will be moving. We need to create variables to store our current player location. While we could just add an <code>x</code> and <code>y</code> variable to our file, I prefer to store related variables together. Let&rsquo;s change our <code>player</code> variable to be a &ldquo;table&rdquo; or &ldquo;object.&rdquo;</p><p>Let&rsquo;s remove the <code>playerImg</code> variable. This will cause an error in the draw command, but we&rsquo;ll fix that in a second. Then lets add the following declaration where <code>playerImg</code> used to be.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>player <span style=color:#f92672>=</span> { x <span style=color:#f92672>=</span> <span style=color:#ae81ff>200</span>, y <span style=color:#f92672>=</span> <span style=color:#ae81ff>710</span>, speed <span style=color:#f92672>=</span> <span style=color:#ae81ff>150</span>, img <span style=color:#f92672>=</span> <span style=color:#66d9ef>nil</span> }
</span></span></code></pre></div><p>Now we have a player table that contains an <code>x</code> and <code>y</code> coordinate, a <code>speed</code> we&rsquo;ll be using later, and an <code>img</code>. Note that I&rsquo;ve left the img value blank. That&rsquo;s because we need to fill it in at runtime. Where you currently have <code>playerImg = love.graphics.newImage('assets/plane.png')</code> change <code>playerImg</code> to <code>player.img</code>. Do the same to the <code>playerImg</code> used in the <code>love.draw</code> function.</p><p>If you run the application now &ndash; and you should &ndash; you&rsquo;ll see exactly the same thing as you did before.</p><p>Let&rsquo;s make use of our new player variables. Change our draw command to read:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>love.graphics.draw(player.img, player.x, player.y)
</span></span></code></pre></div><h2 id=5-adding-user-input>5. Adding User Input
<a class=anchor href=#5-adding-user-input>#</a></h2><p>You should now see our player image centered in the bottom of the screen, right where it should be. If we change <code>player.x</code> or <code>player.y</code> the player will move accordingly. Let&rsquo;s add some user input. Replace your current empty <code>love.update</code> with.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- Updating</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>love</span>.<span style=color:#a6e22e>update</span>(dt)
</span></span><span style=display:flex><span>	<span style=color:#75715e>-- I always start with an easy way to exit the game</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> love.keyboard.isDown(<span style=color:#e6db74>&#39;escape&#39;</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		love.event.push(<span style=color:#e6db74>&#39;quit&#39;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> love.keyboard.isDown(<span style=color:#e6db74>&#39;left&#39;</span>,<span style=color:#e6db74>&#39;a&#39;</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		player.x <span style=color:#f92672>=</span> player.x <span style=color:#f92672>-</span> (player.speed<span style=color:#f92672>*</span>dt)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>elseif</span> love.keyboard.isDown(<span style=color:#e6db74>&#39;right&#39;</span>,<span style=color:#e6db74>&#39;d&#39;</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		player.x <span style=color:#f92672>=</span> player.x <span style=color:#f92672>+</span> (player.speed<span style=color:#f92672>*</span>dt)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>When you run our game again you&rsquo;ll be able to move the player back and forth and exit out just by hitting the escape key. If you feel your player should be faster or slower you can change player.speed to a higher or lower number. We multiple by <code>dt</code> standing for delta-time or the change in time since the last update call to account for framerate differences between machines.</p><p>We do have a few issues though. The main one is concerning bounding. Our player can just fly right off screen. We&rsquo;ll have to check his current position before we move him. Change our movement key block in the update function to the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>if</span> love.keyboard.isDown(<span style=color:#e6db74>&#39;left&#39;</span>,<span style=color:#e6db74>&#39;a&#39;</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> player.x <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>then</span> <span style=color:#75715e>-- binds us to the map</span>
</span></span><span style=display:flex><span>		player.x <span style=color:#f92672>=</span> player.x <span style=color:#f92672>-</span> (player.speed<span style=color:#f92672>*</span>dt)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>elseif</span> love.keyboard.isDown(<span style=color:#e6db74>&#39;right&#39;</span>,<span style=color:#e6db74>&#39;d&#39;</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> player.x <span style=color:#f92672>&lt;</span> (love.graphics.getWidth() <span style=color:#f92672>-</span> player.img:getWidth()) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		player.x <span style=color:#f92672>=</span> player.x <span style=color:#f92672>+</span> (player.speed<span style=color:#f92672>*</span>dt)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>All we&rsquo;re doing is making sure our <code>player.x</code> variable is within our game world. For our right bound we get the width of the screen (<code>love.graphics.getWidth()</code>) and subtract the width of the player image (<code>player.img:getWidth()</code>). This gives us the correct value for the top-left corner position of our player.</p><h2 id=6-creating-bullets>6. Creating Bullets
<a class=anchor href=#6-creating-bullets>#</a></h2><p>Are you ready for the tricky part? We need to allow our player to fire. This means creating and tracking an entire table of bullet objects, drawing them, updating them, etc., <em>and</em> using timers to track when our player is allowed to fire. Let&rsquo;s start by declaring some variables at the top of the file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- Timers</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- We declare these here so we don&#39;t have to edit them multiple places</span>
</span></span><span style=display:flex><span>canShoot <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>canShootTimerMax <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.2</span> 
</span></span><span style=display:flex><span>canShootTimer <span style=color:#f92672>=</span> canShootTimerMax
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Image Storage</span>
</span></span><span style=display:flex><span>bulletImg <span style=color:#f92672>=</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Entity Storage</span>
</span></span><span style=display:flex><span>bullets <span style=color:#f92672>=</span> {} <span style=color:#75715e>-- array of current bullets being drawn and updated</span>
</span></span></code></pre></div><p>While we&rsquo;re here let&rsquo;s load our bullet image (stored in bulletImg) in our load function. Our load function needs to contain the following line:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>bulletImg <span style=color:#f92672>=</span> love.graphics.newImage(<span style=color:#e6db74>&#39;assets/bullet.png&#39;</span>)
</span></span></code></pre></div><p>You&rsquo;re probably wondering why we&rsquo;re not using an object for bullet like we did with player. Bullet <em>will</em> be an object but we&rsquo;re going to declare that object with each bullet created. To say ourselves some loading time we&rsquo;re going to load the image ahead of time, store it by itself, and just reference it later when we create the bullet itself.</p><p>Those timers aren&rsquo;t going to take care of themselves. We&rsquo;ll have to deal with them in our update loop. We&rsquo;ll be manually subtracting values each time the frame updates. Here is the code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- Time out how far apart our shots can be.</span>
</span></span><span style=display:flex><span>canShootTimer <span style=color:#f92672>=</span> canShootTimer <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>*</span> dt)
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> canShootTimer <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  canShoot <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>You&rsquo;ll note that we&rsquo;re not just subtracting 1 on each update. Instead we&rsquo;re subtracting 1 Ã— dt. Like in our other calculations we want to account for varying framerates between computers.</p><p>After we do our subtraction we check our timer value and if it is under 0 we set our canShoot variable to true. Later in our update function we&rsquo;ll check this value and our keypresses. That code reads as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>if</span> love.keyboard.isDown(<span style=color:#e6db74>&#39;space&#39;</span>, <span style=color:#e6db74>&#39;rctrl&#39;</span>, <span style=color:#e6db74>&#39;lctrl&#39;</span>) <span style=color:#f92672>and</span> canShoot <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>-- Create some bullets</span>
</span></span><span style=display:flex><span>	newBullet <span style=color:#f92672>=</span> { x <span style=color:#f92672>=</span> player.x <span style=color:#f92672>+</span> (player.img:getWidth()<span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>), y <span style=color:#f92672>=</span> player.y, img <span style=color:#f92672>=</span> bulletImg }
</span></span><span style=display:flex><span>	table.insert(bullets, newBullet)
</span></span><span style=display:flex><span>	canShoot <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>	canShootTimer <span style=color:#f92672>=</span> canShootTimerMax
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>We&rsquo;re giving the player a lot of options here. They can use space or either control button as their fire key. However, we can&rsquo;t just create a new bullet if one of those keys is down. If we do that the player will be able to create a constant stream of bullets, literally hosing down enemies. You can see this by removing <code>and canShoot</code> from our code above.</p><p>The next line creates a new object called <code>newBullet</code>. Like the player object, we give bullets an x and y position as well as an image. Our y position is just the player&rsquo;s y position. This will put the bullet at the top of our player image. For our x position we need to do a little math. We take the player&rsquo;s x position and move over by half the width of the player&rsquo;s image. This gives us the center x position of the player, and means the bullet will be &ldquo;fired&rdquo; from the top center of our player image.</p><p>Finally we get to our <code>table.insert</code> call. This is one of lua&rsquo;s built in functions for dealing with tables. Earlier we declared an empty table called <code>bullets</code>. Now we&rsquo;ll use <code>table.insert</code> to add our entire newBullet object to the bullets table. Later we&rsquo;ll loop through this table and update each bullet object.</p><p>Actually, we&rsquo;re going to loop through those twice. First, in our draw function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>for</span> i, bullet <span style=color:#66d9ef>in</span> ipairs(bullets) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  love.graphics.draw(bullet.img, bullet.x, bullet.y)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Then in our update function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- update the positions of bullets</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i, bullet <span style=color:#66d9ef>in</span> ipairs(bullets) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>	bullet.y <span style=color:#f92672>=</span> bullet.y <span style=color:#f92672>-</span> (<span style=color:#ae81ff>250</span> <span style=color:#f92672>*</span> dt)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  	<span style=color:#66d9ef>if</span> bullet.y <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>then</span> <span style=color:#75715e>-- remove bullets when they pass off the screen</span>
</span></span><span style=display:flex><span>		table.remove(bullets, i)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Both of these little code snippets are loops. Here we take a table full of bullet objects and perform the same operations on each one. The loop is just saying <code>for each bullet in bullets do x</code>. However, we&rsquo;re going to use a curious lua function called <code>ipairs</code>. In our loop we have both a bullet object, <code>bullet</code>, and the index (location) of that object, <code>i</code>. These values are returned by <code>ipairs</code>. We use that index in our <code>table.remove</code> function to ensure we&rsquo;re not wasting time drawing or updating bullets that have left the screen.</p><p>That concludes part 2. In part 3 we&rsquo;ll create enemies, handle collisions, and make a real game out of this.</p><h2 id=8-creating-enemies>8. Creating Enemies
<a class=anchor href=#8-creating-enemies>#</a></h2><p>The logic for our enemies is going to look a lot like the logic we&rsquo;re using for our bullets. We&rsquo;ll have a timer that tells us when to create enemies, a table of enemy objects, and a couple of loops to update and draw our enemies. Let&rsquo;s add declarations for our timers and enemy image at the top of out <code>main.lua</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>--More timers</span>
</span></span><span style=display:flex><span>createEnemyTimerMax <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.4</span>
</span></span><span style=display:flex><span>createEnemyTimer <span style=color:#f92672>=</span> createEnemyTimerMax
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>-- More images</span>
</span></span><span style=display:flex><span>enemyImg <span style=color:#f92672>=</span> <span style=color:#66d9ef>nil</span> <span style=color:#75715e>-- Like other images we&#39;ll pull this in during out love.load function</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>-- More storage</span>
</span></span><span style=display:flex><span>enemies <span style=color:#f92672>=</span> {} <span style=color:#75715e>-- array of current enemies on screen</span>
</span></span></code></pre></div><p>Then we fill in our <code>enemyImg</code> variable in our <code>love.load</code> function like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>enemyImg <span style=color:#f92672>=</span> love.graphics.newImage(<span style=color:#e6db74>&#39;assets/enemy.png&#39;</span>)
</span></span></code></pre></div><p>Here is where we differ from our bullet code. While bullets are created on a keypress from the player, enemies are handled independently. Let&rsquo;s use our timers to create new enemies every so often. Add this code to our <code>love.update</code> function.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- Time out enemy creation</span>
</span></span><span style=display:flex><span>createEnemyTimer <span style=color:#f92672>=</span> createEnemyTimer <span style=color:#f92672>-</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>*</span> dt)
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> createEnemyTimer <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	createEnemyTimer <span style=color:#f92672>=</span> createEnemyTimerMax
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>-- Create an enemy</span>
</span></span><span style=display:flex><span>	randomNumber <span style=color:#f92672>=</span> math.random(<span style=color:#ae81ff>10</span>, love.graphics.getWidth() <span style=color:#f92672>-</span> <span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>	newEnemy <span style=color:#f92672>=</span> { x <span style=color:#f92672>=</span> randomNumber, y <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>, img <span style=color:#f92672>=</span> enemyImg }
</span></span><span style=display:flex><span>	table.insert(enemies, newEnemy)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Still looks pretty similar to our bullet code, right? There are still a few new concepts so bear with me. First, we&rsquo;re using lua&rsquo;s built in <code>math.random</code> function to generate a number between 10 and the width of the screen minus ten. This gives us a good area to create an enemy in. We want to make sure that incoming enemies are spread out. The we start the enemies partially off-screen with a y coordinate of -10. This ensures that there is no weird &ldquo;pop-ins&rdquo; when enemies are created.</p><p>As with bullets we need to loop through and update their positions.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- update the positions of enemies</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i, enemy <span style=color:#66d9ef>in</span> ipairs(enemies) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>	enemy.y <span style=color:#f92672>=</span> enemy.y <span style=color:#f92672>+</span> (<span style=color:#ae81ff>200</span> <span style=color:#f92672>*</span> dt)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> enemy.y <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>850</span> <span style=color:#66d9ef>then</span> <span style=color:#75715e>-- remove enemies when they pass off the screen</span>
</span></span><span style=display:flex><span>		table.remove(enemies, i)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>And draw them.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>for</span> i, enemy <span style=color:#66d9ef>in</span> ipairs(enemies) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>	love.graphics.draw(enemy.img, enemy.x, enemy.y)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>If everything goes according to plan you can fire up the game and see enemies streaming down from above.</p><h2 id=9-handling-collisions>9. Handling Collisions
<a class=anchor href=#9-handling-collisions>#</a></h2><p>That just leaves us with the connundrum of collisions. Bullets collide with enemies. Enemies collide with the player. We need to know when and what to do. For most Love projects, users will roll out a library like
<a href=http://vrld.github.io/HardonCollider/ rel=noopener>HardonCollider</a> or
<a href=https://github.com/kikito/bump.lua rel=noopener>bump.lua</a>. These are overkill for our project. Instead, I&rsquo;m going to lift a little collision function from the Love2d wiki and place it at the top of our <code>main.lua</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- Collision detection taken function from http://love2d.org/wiki/BoundingBox.lua</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Returns true if two boxes overlap, false if they don&#39;t</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- x1,y1 are the left-top coords of the first box, while w1,h1 are its width and height</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- x2,y2,w2 &amp; h2 are the same, but for the second box</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>CheckCollision</span>(x1,y1,w1,h1, x2,y2,w2,h2)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> x1 <span style=color:#f92672>&lt;</span> x2<span style=color:#f92672>+</span>w2 <span style=color:#f92672>and</span>
</span></span><span style=display:flex><span>         x2 <span style=color:#f92672>&lt;</span> x1<span style=color:#f92672>+</span>w1 <span style=color:#f92672>and</span>
</span></span><span style=display:flex><span>         y1 <span style=color:#f92672>&lt;</span> y2<span style=color:#f92672>+</span>h2 <span style=color:#f92672>and</span>
</span></span><span style=display:flex><span>         y2 <span style=color:#f92672>&lt;</span> y1<span style=color:#f92672>+</span>h1
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>While we&rsquo;re up here lets also add a real quick check to the status of our player and a score variable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>isAlive <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>score <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>Now things get really tricky. We have two arrays of objects that we need to check for collisions and a separate entity (the player) that we also need to check. In our game, the player cannot collide with his or her own bullets, so that simplifies things slightly. Let&rsquo;s loop through our list of enemies then through our bullets then finally our player. It&rsquo;s going to look like this jumbled mess:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- run our collision detection</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Since there will be fewer enemies on screen than bullets we&#39;ll loop them first</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Also, we need to see if the enemies hit our player</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i, enemy <span style=color:#66d9ef>in</span> ipairs(enemies) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> j, bullet <span style=color:#66d9ef>in</span> ipairs(bullets) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> CheckCollision(enemy.x, enemy.y, enemy.img:getWidth(), enemy.img:getHeight(), bullet.x, bullet.y, bullet.img:getWidth(), bullet.img:getHeight()) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>			table.remove(bullets, j)
</span></span><span style=display:flex><span>			table.remove(enemies, i)
</span></span><span style=display:flex><span>			score <span style=color:#f92672>=</span> score <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> CheckCollision(enemy.x, enemy.y, enemy.img:getWidth(), enemy.img:getHeight(), player.x, player.y, player.img:getWidth(), player.img:getHeight()) 
</span></span><span style=display:flex><span>	<span style=color:#f92672>and</span> isAlive <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		table.remove(enemies, i)
</span></span><span style=display:flex><span>		isAlive <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Looks pretty scary, but it&rsquo;s not so bad. For each enemy, check each bullet and the player for coordinate overlap. If there is overlap take the appropriate action &ndash; usually destroying one or both of the entities and incrementing the score.</p><h2 id=10-the-game-part>10. The Game Part
<a class=anchor href=#10-the-game-part>#</a></h2><p><em>Shewww</em>, we&rsquo;re almost done, but it&rsquo;s not quite a game yet. We&rsquo;re marking the player as dead, but failing to actually kill him or her. After that the player needs the ability to restart the game. Fortunately, this is really easy.</p><p>First, let&rsquo;s wrap our <code>.draw(player.img, â€¦</code> in an if block. We only need to draw the player when he or she is alive. If the player isn&rsquo;t alive we&rsquo;ll tell them how to restart the game.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>if</span> isAlive <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	love.graphics.draw(player.img, player.x, player.y)
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	love.graphics.print(<span style=color:#e6db74>&#34;Press &#39;R&#39; to restart&#34;</span>, love.graphics:getWidth()<span style=color:#f92672>/</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>50</span>, love.graphics:getHeight()<span style=color:#f92672>/</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Then we handle this button press at the bottom of our update function.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> isAlive <span style=color:#f92672>and</span> love.keyboard.isDown(<span style=color:#e6db74>&#39;r&#39;</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>-- remove all our bullets and enemies from screen</span>
</span></span><span style=display:flex><span>	bullets <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>	enemies <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>-- reset timers</span>
</span></span><span style=display:flex><span>	canShootTimer <span style=color:#f92672>=</span> canShootTimerMax
</span></span><span style=display:flex><span>	createEnemyTimer <span style=color:#f92672>=</span> createEnemyTimerMax
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>-- move player back to default position</span>
</span></span><span style=display:flex><span>	player.x <span style=color:#f92672>=</span> <span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span>	player.y <span style=color:#f92672>=</span> <span style=color:#ae81ff>710</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>-- reset our game state</span>
</span></span><span style=display:flex><span>	score <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	isAlive <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>There you go. That&rsquo;s everything. You have just completed a simple game in under 200 lines, and that&rsquo;s a fantastic first step.</p><p>If you want to continue learning go ahead and check out the exercises in the next section by
<a href=http://www.osmstudios.com/tutorials/your-first-love2d-game-in-200-lines-exercises rel=noopener>clicking here</a>.</p><h2 id=exercises>Exercises
<a class=anchor href=#exercises>#</a></h2><h3 id=adding-sound-effects>Adding Sound Effects
<a class=anchor href=#adding-sound-effects>#</a></h3><p>The game is kind of quiet, don&rsquo;t you think? I&rsquo;ve included a gunshot sound in the assets zip. Go ahead and add it to the game. You can get some help here:
<a href=https://www.love2d.org/wiki/Tutorial:Audio rel=noopener>https://www.love2d.org/wiki/Tutorial:Audio</a></p><p>Like images, sound effects need to be loaded inside our <code>love.load</code> function.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>gunSound <span style=color:#f92672>=</span> love.audio.newSource(<span style=color:#e6db74>&#34;assets/gun-sound.wav&#34;</span>, <span style=color:#e6db74>&#34;static&#34;</span>)
</span></span></code></pre></div><p>We then go down into our update, find where the bullets are created and add our play command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>if</span> love.keyboard.isDown(<span style=color:#e6db74>&#39; &#39;</span>, <span style=color:#e6db74>&#39;rctrl&#39;</span>, <span style=color:#e6db74>&#39;lctrl&#39;</span>, <span style=color:#e6db74>&#39;ctrl&#39;</span>) <span style=color:#f92672>and</span> canShoot <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>-- Create some bullets</span>
</span></span><span style=display:flex><span>	newBullet <span style=color:#f92672>=</span> { x <span style=color:#f92672>=</span> player.x <span style=color:#f92672>+</span> (player.img:getWidth()<span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>), y <span style=color:#f92672>=</span> player.y, img <span style=color:#f92672>=</span> bulletImg }
</span></span><span style=display:flex><span>	table.insert(bullets, newBullet)
</span></span><span style=display:flex><span>	<span style=color:#75715e>--NEW LINE</span>
</span></span><span style=display:flex><span>    gunSound:play()
</span></span><span style=display:flex><span>    <span style=color:#75715e>--END NEW</span>
</span></span><span style=display:flex><span>    canShoot <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>	canShootTimer <span style=color:#f92672>=</span> canShootTimerMax
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>You might notice that we&rsquo;re not using <code>gunSound.play()</code> but instead we use <code>gunSound:play()</code>. This is a Lua language convention. Saying <code>:play</code> is the same as saying <code>.play(gunSound)</code></p><h3 id=player-vertical-movement>Player Vertical Movement
<a class=anchor href=#player-vertical-movement>#</a></h3><p>Moving side-to-side is fine, but this isn&rsquo;t the 80s anymore. Long gone are the days of Space Invaders. Let&rsquo;s add vertical movement to our game just like we added horizontal movement. Make sure that we keep our player from flying off-screen.</p><p>Add to <code>love.update</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- Vertical movement</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> love.keyboard.isDown(<span style=color:#e6db74>&#39;up&#39;</span>, <span style=color:#e6db74>&#39;w&#39;</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> player.y <span style=color:#f92672>&gt;</span> (love.graphics.getHeight() <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		player.y <span style=color:#f92672>=</span> player.y <span style=color:#f92672>-</span> (player.speed<span style=color:#f92672>*</span>dt)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>elseif</span> love.keyboard.isDown(<span style=color:#e6db74>&#39;down&#39;</span>, <span style=color:#e6db74>&#39;s&#39;</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> player.y <span style=color:#f92672>&lt;</span> (love.graphics.getHeight() <span style=color:#f92672>-</span> <span style=color:#ae81ff>55</span>) <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		player.y <span style=color:#f92672>=</span> player.y <span style=color:#f92672>+</span> (player.speed<span style=color:#f92672>*</span>dt)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><h3 id=display-the-score>Display the Score
<a class=anchor href=#display-the-score>#</a></h3><p>We&rsquo;re tracking the score, but I seem to have forgotten to display it anywhere. Go ahead and write it out. Remember, we&rsquo;re already writing some text when the game is restarted.</p><p>Add to <code>love.draw</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>love.graphics.setColor(<span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>255</span>)
</span></span><span style=display:flex><span>love.graphics.print(<span style=color:#e6db74>&#34;SCORE: &#34;</span> <span style=color:#f92672>..</span> tostring(score), <span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>10</span>)
</span></span></code></pre></div><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://datastring.github.io/forgetful-notes/quartz/js/graph.cbd78cfa87df7d3e230d16fc24f06548.js></script></div></div><div id=contact_buttons><footer><p>Made with <a href=https://github.com/64bitpandas/amethyst>Amethyst</a>, Â© 2023 Miguel Pimentel</p><ul><li><a href=https://datastring.github.io/forgetful-notes/>Home</a></li><li><a href=https://miguelpimentel.do/blog/>Blog</a></li><li><a href=https://github.com/datastring/>GitHub</a></li><li><a href=https://github.com/datastring/forgetful-notes/>Source</a></li></ul></footer></div></article><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#1-getting-setup>1. Getting Setup</a></li><li><a href=#2-configuration>2. Configuration</a></li><li><a href=#3-drawing-to-the-screen>3. Drawing to the Screen</a></li><li><a href=#4-creating-a-player-object>4. Creating A Player Object</a></li><li><a href=#5-adding-user-input>5. Adding User Input</a></li><li><a href=#6-creating-bullets>6. Creating Bullets</a></li><li><a href=#8-creating-enemies>8. Creating Enemies</a></li><li><a href=#9-handling-collisions>9. Handling Collisions</a></li><li><a href=#10-the-game-part>10. The Game Part</a></li><li><a href=#exercises>Exercises</a><ul><li><a href=#adding-sound-effects>Adding Sound Effects</a></li><li><a href=#player-vertical-movement>Player Vertical Movement</a></li><li><a href=#display-the-score>Display the Score</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>